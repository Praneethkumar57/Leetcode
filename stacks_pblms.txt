// leetcode 907

class Solution {
public:
    int sumSubarrayMins(vector<int>& arr) {
        int n=arr.size();
        int mod = (1e9+7);
        vector<int> pse(n);
        vector<int> nse(n);
        stack<pair<int,int>> st;
        for(int i=0;i<n;i++){
            while(!st.empty()){
                if(arr[i]<st.top().first){
                    nse[st.top().second]=i;
                    st.pop();
                }
                else{
                    break;
                }
            }

            if(st.empty()){
                pse[i]=-1;
            }
            else{
                pse[i]=st.top().second;
            }
            st.push({arr[i],i});
        }
        while(!st.empty()){
            nse[st.top().second]=n;
            st.pop();
        }
        long long ans=0;
        for(int i=0;i<n;i++){
            long long r= (nse[i]-i);
            long long l= (i-pse[i]);
            ans = (ans+(l*r % mod)*arr[i] %mod)%mod;
        }
        return (int)ans;
    }
};


// nge,pge, nse,pse


#include<bits/stdc++.h>
using namespace std;

void solve(){
  int n;
  cin>>n;
  vector<int> a(n);
  for(int i=0;i<n;i++)cin>>a[i];
  
  // finding nge and pge
  
  vector<int> nge(n,n);
  vector<int> pge(n,-1);
  stack<pair<int,int>> st;
  for(int i=0;i<n;i++){
    while(!st.empty() && a[i]>st.top().first){
      nge[st.top().second]=i;
      st.pop();
    }
    
    if(!st.empty()){
      pge[i]=st.top().second;
    }
    st.push({a[i],i});
  }
  
  for(auto it:nge){
    cout<<it<<" ";
  }
  cout<<endl;
  for(auto it:pge){
    cout<<it<<" ";
  }
  cout<<endl;
  
  
  // finding nse and pse
  
  vector<int> nse(n,n);
  vector<int> pse(n,-1);
  stack<pair<int,int>> st2;
  
  for(int i=0;i<n;i++){
    while(!st2.empty() && a[i]<st2.top().first){
      nse[st2.top().second] = i;
      st2.pop();
    }
    
    if(!st2.empty()){
      pse[i] = st2.top().second;
    }
    st2.push({a[i],i});
  }
  
  for(auto it:nse){
    cout<<it<<" ";
  }
  cout<<endl;
  for(auto it:pse){
    cout<<it<<" ";
  }
  return;
}

int32_t main() 
{
    int t=1;
    //cin>>t;
    while(t--){
      solve();
      //cout<<s<<endl;
    }
    return 0;
}


// leetcode 2104

class Solution {
public:
    long long subArrayRanges(vector<int>& nums) {
        int n=nums.size();
        vector<int> nse(n,n);
        vector<int> pse(n,-1);
        stack<pair<int,int>> st;
        for(int i=0;i<n;i++){
            while(!st.empty() && nums[i]<=st.top().first){
                nse[st.top().second] = i;
                st.pop();
            }
            if(!st.empty()){
                pse[i] = st.top().second;
            }
            st.push({nums[i],i});
        }
        while(!st.empty()){
            st.pop();
        }

        vector<int> nge(n,n);
        vector<int> pge(n,-1);

        for(int i=0;i<n;i++){
            while(!st.empty() && nums[i]>=st.top().first){
                nge[st.top().second] = i;
                st.pop();
            }
            if(!st.empty()){
                pge[i]=st.top().second;
            }
            st.push({nums[i],i});
        }

        long long ans = 0;
        long long minsum = 0;
        long long maxsum = 0;
        for(int i=0;i<n;i++){
            long long lmin = i-pse[i];
            long long rmin = nse[i]-i;
            minsum += (lmin*rmin*nums[i]);
            long long lmax = i-pge[i];
            long long rmax = nge[i]-i;
            maxsum += (lmax*rmax*nums[i]);
        }
        ans = maxsum - minsum;
        return ans;
    }
};


// leetcode 84

class Solution {
public:
    int largestRectangleArea(vector<int>& h) {
        int n=h.size();
        vector<int> pse(n,-1);
        vector<int> nse(n,n);
        stack<pair<int,int>> st;
        for(int i=0;i<n;i++){
            while(!st.empty() && h[i]<=st.top().first){
                nse[st.top().second] = i;
                st.pop();
            }
            if(!st.empty()){
                pse[i] = st.top().second;
            }
            st.push({h[i],i});
        }
        int ans = 0;
        for(int i=0;i<n;i++){
            int l=i-(pse[i]+1);
            int r=nse[i]-i;
            ans = max(ans, (l+r)*h[i]);
        }
        return ans;
    }
};


// leetcode 85


class Solution {
public:
    int maximalRectangle(vector<vector<char>>& mat) {
        int n=mat.size();
        int m=mat[0].size();
        vector<vector<int>> a(n,vector<int>(m));
        for(int i=0;i<n;i++){
            for(int j=0;j<m;j++){
                int cnt=0;
                int k=i;
                while(k>=0 && mat[k][j]=='1'){
                    cnt++;
                    k--;
                }
                a[i][j]=cnt;
            }
        }
        int ans=0;
        for(int i=0;i<n;i++){
            vector<int> pse(m,-1);
            vector<int> nse(m,m);
            stack<pair<int,int>> st;
            for(int j=0;j<m;j++){
                while(!st.empty() && a[i][j]<=st.top().first){
                    nse[st.top().second]=j;
                    st.pop();
                }
                if(!st.empty()){
                    pse[j]=st.top().second;
                }
                st.push({a[i][j],j});
            }
            for(int k=0;k<m;k++){
                int l = (k-(pse[k]+1));
                int r=nse[k]-k;
                ans = max(ans, (l+r)*a[i][k]); 
            }
        }
        return ans;
    }
};
